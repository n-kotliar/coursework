{"version":3,"file":"index.js","sources":["../src/js/exercises.js","../src/js/footer.js"],"sourcesContent":["import handlerStartBtn from './exercises_card.js';\r\nimport { displayQuote } from './localalStorageLogical.js';\r\nimport {\r\n  fetchFilterss,\r\n  fetchExercisesAPI,\r\n  page,\r\n  currentFilter,\r\n  localResponse,\r\n  setFilter,\r\n  setName,\r\n  setCurrentFilter,\r\n  setPage,\r\n} from './api.js';\r\n\r\nconst refs = {\r\n  filters: document.querySelector('.filters'),\r\n  navButtons: document.querySelector('.nav-buttons'),\r\n  musclesBtn: document.querySelector('.muscles-btn'),\r\n  exercisesTitle: document.querySelector('.exercises-title'),\r\n  searchForm: document.querySelector('.search-form'),\r\n  loadMoreBtn: document.querySelector('.load-more-btn'),\r\n  quoteContainer: document.querySelector('.quote'),\r\n  pagination: document.querySelector('.pagination'),\r\n  exercises: document.querySelector('.exercises'),\r\n};\r\n\r\ndisplayQuote(refs.quoteContainer);\r\nfetchFilters();\r\n\r\nrefs.musclesBtn.classList.add('active-btn');\r\n\r\nrefs.filters.addEventListener('click', pressFilterBtn);\r\nrefs.exercises.addEventListener('click', loadExercises);\r\nrefs.searchForm.addEventListener('input', onLiveSearch);\r\nrefs.loadMoreBtn?.addEventListener('click', loadMore);\r\n\r\nasync function fetchFilters(reset = true) {\r\n  if (reset) refs.exercises.innerHTML = '';\r\n\r\n  const data = await fetchFilterss(reset);\r\n  if (!data.results.length) return showNoResults();\r\n\r\n  makeFilterCards(data.results);\r\n  renderPagination(data.totalPages);\r\n}\r\n\r\nfunction makeFilterCards(items) {\r\n  const markup = items\r\n    .map(\r\n      ({ name, filter, imgURL }) => `\r\n      <li class=\"exercise\">\r\n        <img src=\"${imgURL}\" alt=\"${name}\" loading=\"lazy\" class=\"exercise-image\" />\r\n        <div class=\"exercise-info\">\r\n          <h2 class=\"exercise-subtitle\">${capitalize(name)}</h2>\r\n          <p class=\"exercise-filter\">${filter}</p>\r\n        </div>\r\n      </li>\r\n    `\r\n    )\r\n    .join('');\r\n\r\n  refs.exercises.insertAdjacentHTML('beforeend', markup);\r\n}\r\n\r\nfunction pressFilterBtn(event) {\r\n  if (event.target.tagName !== 'BUTTON') return;\r\n\r\n  document.querySelector('.active-btn')?.classList.remove('active-btn');\r\n  event.target.classList.add('active-btn');\r\n\r\n  if (event.target.classList.contains('muscles-btn'))\r\n    setCurrentFilter('Muscles');\r\n  else if (event.target.classList.contains('bodyparts-btn'))\r\n    setCurrentFilter('Body parts');\r\n  else if (event.target.classList.contains('equipment-btn'))\r\n    setCurrentFilter('Equipment');\r\n\r\n  refs.exercisesTitle.textContent = 'Exercises';\r\n  refs.searchForm.style.display = 'none';\r\n  fetchFilters(true);\r\n}\r\n\r\nasync function loadExercises(event) {\r\n  const card = event.target.closest('.exercise');\r\n  if (!card) return;\r\n\r\n  const filterEl = card.querySelector('.exercise-filter');\r\n  const nameEl = card.querySelector('.exercise-subtitle');\r\n  if (!filterEl || !nameEl) return;\r\n\r\n  setFilter(filterEl.textContent);\r\n  setName(nameEl.textContent.toLowerCase());\r\n\r\n  refs.exercisesTitle.innerHTML = `Exercises / <span>${capitalize(nameEl.textContent)}</span>`;\r\n  refs.searchForm.style.display = 'block';\r\n  setPage(1);\r\n  refs.exercises.innerHTML = '';\r\n\r\n  await fetchExercises();\r\n}\r\n\r\nasync function fetchExercises(reset = true) {\r\n  if (reset) localResponse.length = 0;\r\n\r\n  const data = await fetchExercisesAPI(reset);\r\n  if (!data.results.length) return showNoResults();\r\n\r\n  localResponse.length = 0;\r\n  localResponse.push(...data.results);\r\n  makeExercisesCards(data.results);\r\n  renderPagination(data.totalPages);\r\n}\r\n\r\nfunction makeExercisesCards(items) {\r\n  refs.exercises.innerHTML = '';\r\n  localResponse.length = 0;\r\n  localResponse.push(...items);\r\n\r\n  const markup = `\r\n    <ul class=\"exercises-cards\">\r\n      ${items\r\n        .map(\r\n          ({ name, _id, rating, burnedCalories, bodyPart, target, time }) => `\r\n        <li class=\"exercise-information\" data-id-card=\"${_id}\">\r\n          <div class=\"top-nav\">\r\n            <div>\r\n              <p class=\"tag\">Workout</p>\r\n              <span class=\"rating\">\r\n                ${rating}\r\n                <svg class=\"star-icon\" width=\"14\" height=\"14\">\r\n                  <use href=\"/coursework/symbol-defs.svg#icon-star\"></use>\r\n                </svg>\r\n              </span>\r\n            </div>\r\n            <button name=\"start\" data-action=\"start\" data-id=\"${_id}\" class=\"details-link\">\r\n              Start\r\n              <svg class=\"arrow-icon\" width=\"16\" height=\"16\">\r\n                <use href=\"/coursework/symbol-defs.svg#icon-arrow\"></use>\r\n              </svg>\r\n            </button>\r\n          </div>\r\n          <div class=\"exercise-header\">\r\n            <svg class=\"icon-man\" fill=\"white\" width=\"24\" height=\"24\">\r\n              <use href=\"/coursework/symbol-defs.svg#icon-run\"></use>\r\n            </svg>\r\n            <h2 class=\"exercise-name\">${capitalize(name)}</h2>\r\n          </div>\r\n          <ul class=\"exercise-details\">\r\n            <li><span>Burned calories:</span> ${burnedCalories} / ${time} min</li>\r\n            <li><span>Body part:</span> ${capitalize(bodyPart)}</li>\r\n            <li><span>Target:</span> ${capitalize(target)}</li>\r\n          </ul>\r\n        </li>\r\n      `\r\n        )\r\n        .join('')}\r\n    </ul>\r\n  `;\r\n\r\n  refs.exercises.insertAdjacentHTML('beforeend', markup);\r\n}\r\n\r\nfunction onLiveSearch(event) {\r\n  keyWord = event.target.value.trim().toLowerCase();\r\n  setPage(1);\r\n  refs.exercises.innerHTML = '';\r\n  fetchExercises(true);\r\n}\r\n\r\nfunction showNoResults() {\r\n  refs.exercises.innerHTML = `<p class=\"no-results-paragraph\">Unfortunately, <span>no results</span> were found.</p>`;\r\n  refs.loadMoreBtn?.style.setProperty('display', 'none');\r\n  if (refs.pagination) refs.pagination.innerHTML = '';\r\n}\r\n\r\nfunction capitalize(str) {\r\n  const clean = str.trim();\r\n  return clean[0].toUpperCase() + clean.slice(1);\r\n}\r\n\r\nfunction renderPagination(totalPages) {\r\n  if (!refs.pagination) return;\r\n  if (totalPages <= 1) {\r\n    refs.pagination.innerHTML = '';\r\n    return;\r\n  }\r\n\r\n  let html = '';\r\n  const createPageBtn = p => `\r\n    <li>\r\n      <button class=\"pagination-btn ${p === page ? 'active' : ''}\" data-page=\"${p}\">\r\n        ${p}\r\n      </button>\r\n    </li>\r\n  `;\r\n\r\n  let start = Math.max(1, page - 1);\r\n  let end = Math.min(totalPages, page + 1);\r\n\r\n  if (page === 1) end = Math.min(totalPages, 3);\r\n  if (page === totalPages) start = Math.max(1, totalPages - 2);\r\n\r\n  if (start > 1) {\r\n    html += createPageBtn(1);\r\n    if (start > 2 && totalPages > 4) html += `<li class=\"dots\">...</li>`;\r\n  }\r\n\r\n  for (let i = start; i <= end; i++) html += createPageBtn(i);\r\n\r\n  if (end < totalPages) {\r\n    if (end < totalPages - 1 && totalPages > 4)\r\n      html += `<li class=\"dots\">...</li>`;\r\n    html += createPageBtn(totalPages);\r\n  }\r\n\r\n  refs.pagination.innerHTML = html;\r\n}\r\n\r\nrefs.pagination?.addEventListener('click', e => {\r\n  const btn = e.target.closest('.pagination-btn');\r\n  if (!btn) return;\r\n  const selectedPage = Number(btn.dataset.page);\r\n  if (selectedPage === page) return;\r\n\r\n  setPage(selectedPage);\r\n  refs.exercises.innerHTML = '';\r\n  filter ? fetchExercises(false) : fetchFilters(false);\r\n});\r\n\r\nrefs.exercises.addEventListener('click', event => {\r\n  const btn = event.target.closest('[data-action=\"start\"]');\r\n  if (!btn) return;\r\n\r\n  const exercise = localResponse.find(el => el._id === btn.dataset.id);\r\n  handlerStartBtn(exercise);\r\n});\r\n","import iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\nimport { postSubscriptions } from './api.js'; \r\n\r\nconst email = document.querySelector('input[name=email]');\r\nconst submitBtnFooter = document.querySelector('.footer-send-button');\r\nconst STORAGE_KEY = 'feedback-form-state';\r\n\r\nfunction isValidEmail(value) {\r\n  const emailRegex = /^[\\w-]+(\\.[\\w-]+)*@([\\w-]+\\.)+[a-zA-Z]{2,7}$/;\r\n  return emailRegex.test(value);\r\n}\r\n\r\nfunction saveToLocalStorage() {\r\n  localStorage.setItem(STORAGE_KEY, JSON.stringify({ email: email.value }));\r\n}\r\n\r\nfunction loadFromLocalStorage() {\r\n  const data = localStorage.getItem(STORAGE_KEY);\r\n  if (!data) return;\r\n\r\n  const { email: savedEmail } = JSON.parse(data);\r\n  email.value = savedEmail || '';\r\n  submitBtnFooter.disabled = !isValidEmail(email.value);\r\n}\r\n\r\nloadFromLocalStorage();\r\n\r\nemail.addEventListener('input', () => {\r\n  saveToLocalStorage();\r\n  submitBtnFooter.disabled = !isValidEmail(email.value);\r\n});\r\n\r\nemail.addEventListener('change', () => {\r\n  if (!isValidEmail(email.value)) {\r\n    iziToast.info({\r\n      message: 'Please enter a valid email address',\r\n    });\r\n  }\r\n});\r\n\r\nsubmitBtnFooter.addEventListener('click', async e => {\r\n  e.preventDefault();\r\n\r\n  if (!isValidEmail(email.value)) return;\r\n\r\n  try {\r\n    await postSubscriptions(email.value);\r\n\r\n    iziToast.success({\r\n      title: 'Success',\r\n      message: 'Welcome to energy.flow world!',\r\n    });\r\n\r\n    email.value = '';\r\n    submitBtnFooter.disabled = true;\r\n    localStorage.removeItem(STORAGE_KEY);\r\n  } catch (error) {\r\n    if (error.message === 'EMAIL_EXISTS') {\r\n      iziToast.warning({\r\n        message: 'Email already exists',\r\n      });\r\n    } else {\r\n      iziToast.error({\r\n        title: 'Error',\r\n        message: 'Something went wrong! Please try again later',\r\n      });\r\n    }\r\n  }\r\n});\r\n"],"names":["refs","displayQuote","fetchFilters","pressFilterBtn","loadExercises","onLiveSearch","_a","reset","data","fetchFilterss","showNoResults","makeFilterCards","renderPagination","items","markup","name","filter","imgURL","capitalize","event","setCurrentFilter","card","filterEl","nameEl","setFilter","setName","setPage","fetchExercises","localResponse","fetchExercisesAPI","makeExercisesCards","_id","rating","burnedCalories","bodyPart","target","time","str","clean","totalPages","html","createPageBtn","p","page","start","end","i","btn","selectedPage","exercise","el","handlerStartBtn","email","submitBtnFooter","STORAGE_KEY","isValidEmail","value","saveToLocalStorage","loadFromLocalStorage","savedEmail","iziToast","postSubscriptions","error"],"mappings":"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"}